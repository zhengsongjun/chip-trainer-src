# ğŸš€ å¿«é€Ÿéƒ¨ç½² - å¸ƒå±€é…ç½®åŠŸèƒ½

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. Firestore Security Rules âœ…
- æ–‡ä»¶: `firestore.rules`
- ä¿æŠ¤ `userBoardLayouts` é›†åˆ
- åªå…è®¸ç”¨æˆ·è®¿é—®è‡ªå·±çš„é…ç½®

### 2. Firebase é…ç½® âœ…
- æ–‡ä»¶: `firebase.json`
- æ·»åŠ äº† firestore rules é…ç½®

### 3. ä»£ç é›†æˆ âœ…
- å¸ƒå±€è°ƒæ•´æŒ‰é’®å·²é›†æˆåˆ° BoardConfigBar
- å¸ƒå±€ç¼–è¾‘æ—¶ç¦ç”¨å³é”®èœå•
- ç”¨æˆ·è®¤è¯æ£€æŸ¥å®Œå–„

## ğŸ¯ ç°åœ¨å°±éƒ¨ç½²

### Windows ç”¨æˆ·

åŒå‡»è¿è¡Œ:
```
scripts\deploy-firestore.bat
```

### Mac/Linux ç”¨æˆ·

```bash
chmod +x scripts/deploy-firestore.sh
./scripts/deploy-firestore.sh
```

### æ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. ç™»å½• Firebase (å¦‚æœè¿˜æœªç™»å½•)
firebase login

# 2. é€‰æ‹©é¡¹ç›®
firebase use reg-training-tool

# 3. éƒ¨ç½²è§„åˆ™
firebase deploy --only firestore:rules
```

## ğŸ“‹ éƒ¨ç½²åæµ‹è¯•

### æµ‹è¯• 1: æœªç™»å½•ç”¨æˆ·
1. é€€å‡ºç™»å½•ï¼ˆå¦‚æœå·²ç™»å½•ï¼‰
2. è¿›å…¥ Board Analysis é¡µé¢
3. ç‚¹å‡»"å¸ƒå±€è°ƒæ•´"æŒ‰é’®
4. å°è¯•ä¿å­˜ â†’ åº”è¯¥æç¤º"è¯·å…ˆç™»å½•"

### æµ‹è¯• 2: å·²ç™»å½•ç”¨æˆ·
1. ç™»å½•è´¦æˆ·
2. è¿›å…¥ Board Analysis é¡µé¢
3. ç‚¹å‡»"å¸ƒå±€è°ƒæ•´"æŒ‰é’®
4. æ‹–æ‹½å…¬å…±ç‰Œã€ç‰Œå †æˆ–æ‰‹ç‰Œ
5. è°ƒæ•´å¤§å°
6. ç‚¹å‡»"ä¿å­˜" â†’ åº”è¯¥æç¤º"å¸ƒå±€å·²ä¿å­˜"
7. åˆ·æ–°é¡µé¢ â†’ å¸ƒå±€åº”è¯¥ä¿æŒ

### æµ‹è¯• 3: è·¨è®¾å¤‡éš”ç¦»
1. åœ¨æ¡Œé¢ç«¯è°ƒæ•´å¸ƒå±€å¹¶ä¿å­˜
2. è°ƒæ•´æµè§ˆå™¨çª—å£åˆ°ç§»åŠ¨ç«¯å°ºå¯¸
3. ç§»åŠ¨ç«¯åº”è¯¥æœ‰ç‹¬ç«‹çš„å¸ƒå±€é…ç½®

### æµ‹è¯• 4: è·¨æ¸¸æˆæ¨¡å¼éš”ç¦»
1. åœ¨ Omaha æ¨¡å¼è°ƒæ•´å¸ƒå±€å¹¶ä¿å­˜
2. åˆ‡æ¢åˆ° Hold'em æ¨¡å¼
3. Hold'em åº”è¯¥æœ‰ç‹¬ç«‹çš„å¸ƒå±€é…ç½®

## ğŸ” éªŒè¯éƒ¨ç½²

### æ–¹æ³• 1: Firebase Console
1. è®¿é—® https://console.firebase.google.com/
2. é€‰æ‹©é¡¹ç›® `reg-training-tool`
3. è¿›å…¥ Firestore Database â†’ **è§„åˆ™**
4. æ£€æŸ¥æ˜¯å¦æœ‰ `userBoardLayouts` è§„åˆ™

### æ–¹æ³• 2: æ£€æŸ¥æ•°æ®
1. æµ‹è¯•ä¿å­˜å¸ƒå±€å
2. Firebase Console â†’ Firestore Database â†’ **æ•°æ®**
3. åº”è¯¥çœ‹åˆ° `userBoardLayouts` é›†åˆ
4. å±•å¼€æŸ¥çœ‹ä½ çš„ userId æ–‡æ¡£

## ğŸ“Š æ•°æ®ç»“æ„ç¤ºä¾‹

```
userBoardLayouts (Collection)
â””â”€â”€ {userId} (Document)
    â”œâ”€â”€ userId: "abc123"
    â”œâ”€â”€ updatedAt: 1234567890
    â””â”€â”€ layouts
        â”œâ”€â”€ desktop
        â”‚   â”œâ”€â”€ holdem: { communityCards, deck, playerHands }
        â”‚   â”œâ”€â”€ omaha: { communityCards, deck, playerHands }
        â”‚   â””â”€â”€ ... (12 ç§æ¸¸æˆæ¨¡å¼)
        â”œâ”€â”€ mobileLandscape
        â”‚   â””â”€â”€ ... (12 ç§æ¸¸æˆæ¨¡å¼)
        â””â”€â”€ mobilePortrait
            â””â”€â”€ ... (12 ç§æ¸¸æˆæ¨¡å¼)
```

## ğŸ› å¸¸è§é—®é¢˜

### "Missing or insufficient permissions"
**è§£å†³**: é‡æ–°éƒ¨ç½² Security Rules
```bash
firebase deploy --only firestore:rules
```

### "è¯·å…ˆç™»å½•" æç¤º
**è§£å†³**: ç¡®ä¿ç”¨æˆ·å·²ç™»å½•å¹¶ä¸” `userStore.profile.uid` å­˜åœ¨

### åˆ·æ–°åé…ç½®ä¸¢å¤±
**åŸå› **:
- ç”¨æˆ·æœªç™»å½•
- Security Rules æœªæ­£ç¡®éƒ¨ç½²

**è§£å†³**:
1. æ£€æŸ¥ç™»å½•çŠ¶æ€
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
3. é‡æ–°éƒ¨ç½² Rules

## ğŸ“š å®Œæ•´æ–‡æ¡£

è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹:
- **éƒ¨ç½²æŒ‡å—**: `docs/FIREBASE_DEPLOYMENT.md`
- **ç³»ç»Ÿè®¾è®¡**: `docs/LAYOUT_SYSTEM.md`
- **å¿«é€Ÿå¼€å§‹**: `docs/LAYOUT_SYSTEM_QUICKSTART.md`
- **é›†æˆçŠ¶æ€**: `docs/LAYOUT_INTEGRATION_COMPLETE.md`

## âœ¨ åŠŸèƒ½æ¸…å•

- âœ… æ‹–æ‹½è°ƒæ•´ä½ç½®
- âœ… +/- æŒ‰é’®è°ƒæ•´å¤§å°
- âœ… è°ƒæ•´å…¬å…±ç‰Œé—´è·
- âœ… ç½‘æ ¼è¾…åŠ©å¯¹é½
- âœ… ä¿å­˜åˆ°äº‘ç«¯
- âœ… è·¨è®¾å¤‡ç‹¬ç«‹é…ç½®ï¼ˆæ¡Œé¢/ç§»åŠ¨æ¨ªå±/ç§»åŠ¨ç«–å±ï¼‰
- âœ… è·¨æ¸¸æˆæ¨¡å¼ç‹¬ç«‹é…ç½®ï¼ˆ12 ç§æ¨¡å¼ï¼‰
- âœ… ç”¨æˆ·æƒé™ä¿æŠ¤
- âœ… ç¼–è¾‘æ¨¡å¼ç¦ç”¨å³é”®èœå•
- âœ… æŒ‰é’®é›†æˆåˆ° ConfigBar

## ğŸ‰ å®Œæˆï¼

éƒ¨ç½²æˆåŠŸåï¼Œæ‰€æœ‰ç™»å½•ç”¨æˆ·éƒ½å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„å¸ƒå±€é…ç½®äº†ï¼
